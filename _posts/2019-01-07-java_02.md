---
layout: post
title:  "[Servlet] WEB구조, WAS 개념"
date:   2019-01-07
excerpt: "web, was, java"
java: true
tag:
- WebServer
- was
- java

comments: true
---

# WEB 구조, WS, WEB 개념

### 1.1 보통의 구조

<figure>
    <img src="https://user-images.githubusercontent.com/37525955/37703532-503d0040-2d39-11e8-81e8-394325785a58.PNG" />
</figure>

### 1.2. 웹서버(Web Server)

* 클라이언트의 요청을 받아 정적인 페이지(웹페이지, 이미지)를 HTTP 프로토콜을 통해 전송한다. 
* 클라이언트의 요청중 자체적으로 처리할수 없는 정보에 대해서는 WAS처리를 요청한다.
* 요청이 많을 경우 웹서버에서는 웹문서를 WAS에서는 JSP페이지를 양분하여 처리 함으로써 서버의 부담을 줄여주는 역활을 실행한다.

ex) apache, Ngnix, lls, WebtoB 등
  
### 1.3. 웹 어플리케이션 서버(Web Application Server)

* 웹서버에서 처리할수 없는 동적인 정보를 처리하여, 웹서버에 정적인 정보를 제공한다.
* 일반적으로 웹서버의 기능을 내제하고 있어, 웹서버 없이도 서비스가 가능하다.

ex) Tomcat, WebLogic, WebSphere, Jeus, JBoss등

### 1.4. WAS 내부구조

<figure>
    <img src="https://user-images.githubusercontent.com/37525955/37703854-61637f88-2d3a-11e8-83e2-bfb2d81adc3f.png" />
</figure>

* 1) 웹서버로부터 요청이 들어오면 제일 먼저 컨테이너가 이를 알맞게 처리한다.
* 2) 컨테이너는 배포서술자(web.xml)를 참조하여 해당 서블릿에 대한 스레드를 생성하고, 요청 및 응답 객체를 생성하여 전달한다.
* 3) 다음으로 컨테이너는 서블릿을 호출한다.
* 4) 호출된 서블릿의 작업을 담당하게 된 스레드는 요청에 따라 doPost() 또는 doGet()을 호출한다.
* 5) 호출된 doPost() 또는 doGet() 메소드는 생성된 동적페이지를 Response객체에 실어서 컨테이너에 전달한다.
* 6) 컨테이너느 전달받은 Response 객체를 HTTPResponse 형태로 전환하여 웹서버에 전달하고 생성되었던 스레드를 종료하고 요청(httpServletRequest) 및 응답(httpServletResponse) 객체를 소멸시킨다.

### 1.5. Container

* WAS 별로 다양한 종류의 컨테이너를 내장하고 있으며, 이들중 서블릿에 관련된 기능을 모아놓은 것을 서블릿 컨테이너라고 부른다.
* 이외에도 Servlet, jsp, EJB 컨테이너등을 내장하고 있다.
  
### 1.6. 서블릿 컨테이너

* 서블릿 컨테이너는 Servlet를 실행하고, 관리하는 역활을 하기 때문에 개발자가 신경써야할 복잡한 부분을 대신 처리하여 준다.
* 한가지 예로 자바애플리케이션 개발시 main() 메소드가 필요없는 이유는 이 때문이다.
* 생명주기 관리 : 서블릿을 로드해 초기화(init 메소드) 한다. 또 클라이언트의 요청으로 서블릿 메소드를 호출하며, 서블릿 컨테이너가 종료되면 서블릿을 종료시키고 (destroy 메소드호출) 메모리를 정리한다. 
*  통신 지원 : 웹서버로부터 받은 요청을 분석해서 서블릿을 실행시키고, 서블릿에서는 웹서버의 정보를 확인 할 수 있도록 하는 기능을 제공한다.
*  멀티스레딩 지원 : 클라이언트의 요청에 따라 서블릿을 생성하고, 이미 생성된 서블릿에 대한 요청은 스레드를 생성해 실행한다.

### 1.7. 컴포넌트(component)

* 특정기능이나 관련된 기능이 재사용 가능한 형태로 만들어진 프로그램 빌딩블록으로, 소프트웨어 개발을 레고 블록 쌓듯이 진행할 수 있도록 하는 기능을 말한다.

### 1.8. WEB,WAS 분리의 이유는?

* 톰캣 5.5 이상부터는 httpd의 native 모듈을 사용해서 정적파일을 처리하는 기능을 제공하는데 이것이 순수 아파치 httpd만 사용하는 것과 비교해서 성능이 전혀 떨어지지 않기 때문이다.
* 로드 밸런싱의 이유로 성능상에 유리함이 있다.

 

