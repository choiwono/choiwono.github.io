---
layout: post
title: ORM이란?
date: 2019-06-12 18:42:32 +0900
description:
categories: Spring
tags: ORM
---

## ORM이란?

* ORM(Object-relational mapping)을 단순하게 표현하면 객체와 관계와의 설정이라 할 수 있다. 그렇다면 과연 객체와 관계라는 것이 의미하는 것은 무엇일까? 지극히 기초적인 이야기지만 개발자가 흔히 사용하고 있는 관계형 데이터베이스를 의미한다.


## 왜 이런 개념이 나왔을까?

* 그렇다면 도대체 무엇이 문제여서 객체와 관계형 데이터베이스 간의 매핑을 지원해주는 Framework나 Tool들이 나오는 것일까?  굳이 이런 새로운 개념들이 나오게 되는 이유는 "Back to basics(기본에 충실하자)" 을 지키기 위해서라고 볼 수 있다. 즉, 보다 OOP다운 프로그래밍을 하자는데부터 출발한 것이다.
* 그럼 과연 무엇이 문제였던 것일까? 우리가 어떤 어플리케이션을 만든다고 하면 관련된 정보들을 객체에 담아 보관하게 된다. 
* 즉, 테이블(Table)에 객체가 가지고 있던 정보를 입력하고, 이 테이블들을 "join"과 같은 SQL 질의어를 통해 관계 설정을 해 주게 된다. 여기서 문제는 객체 모델과 관계형 테이블간에 불일치가 존재한다.

## 어떤식으로 해결할까?

* 데이터베이스 <-> 매핑 <-> Object 
  * 객체를 통해 간접적으로 데이터베이스 데이터를 다룰 수 있다.
* ORM을 통해 객체간의 관계를 바탕으로 SQL을 자동으로 생성하여, 불일치를 해결한다.
* Persistant API라고도 할 수 있다.
Ex) JPA, Hibernate 등

## 장점

* 객체 지향적인 코드로 인해 더 직관적이고 비즈니스 로직에 더 집중할 수 있게 도와준다.
  * 선언문, 할당, 종료 같은 부수적인 코드가 없거나 급격히 줄어든다.
  * 각종 객체에 대한 코드를 별도로 작성하기 때문에 코드의 가독성을 올려준다.
  * SQL의 절차적이고 순차적인 접근이 아닌 객체 지향적인 접근으로 인해 생산성이 증가한다.

* 재사용 및 유지보수의 편리성이 증가한다.
  * ORM은 독립적으로 작성되어있고, 해당 객체들을 재활용 할 수 있다.
  * 때문에 모델에서 가공된 데이터를 컨트롤러에 의해 뷰와 합쳐지는 형태로 디자인 패턴을 견고하게 다지는데 유리하다.
  * 매핑정보가 명확하여, ERD를 보는 것에 대한 의존도를 낮출 수 있다.

* DBMS에 대한 종속성이 줄어든다.
  * 대부분 ORM 솔루션은 DB에 종속적이지 않다.
  * 종속적이지 않다는것은 구현 방법 뿐만아니라 많은 솔루션에서 자료형 타입까지 유효하다.
  * 프로그래머는 Object에 집중함으로 극단적으로 DBMS를 교체하는 거대한 작업에도 비교적 적은 리스크와 시간이 소요된다.
  * 또한 자바에서 가공할경우 equals, hashCode의 오버라이드 같은 자바의 기능을 이용할 수 있고, 간결하고 빠른 가공이 가능하다.

## 단점

* 완벽한 ORM 으로만 서비스를 구현하기가 어렵다.
  * 사용하기는 편하지만 설계는 매우 신중하게 해야한다.
  * 프로젝트의 복잡성이 커질경우 난이도 또한 올라갈 수 있다.
  * 잘못 구현된 경우에 속도 저하 및 심각할 경우 일관성이 무너지는 문제점이 생길 수 있다.
  * 일부 자주 사용되는 대형 쿼리는 속도를 위해 SP를 쓰는등 별도의 튜닝이 필요한 경우가 있다.
  * DBMS의 고유 기능을 이용하기 어렵다. (하지만 이건 단점으로만 볼 수 없다 : 특정 DBMS의 고유기능을 이용하면 이식성이 저하된다.)
* 프로시저가 많은 시스템에선 ORM의 객체 지향적인 장점을 활용하기 어렵다.
  * 이미 프로시저가 많은 시스템에선 다시 객체로 바꿔야하며, 그 과정에서 생산성 저하나 리스크가 많이 발생할 수 있다.


## 참고
* https://gmlwjd9405.github.io/2019/02/01/orm.html
* http://www.incodom.kr/ORM#h_702209f3f35878a32ee91352ddc6bbe7